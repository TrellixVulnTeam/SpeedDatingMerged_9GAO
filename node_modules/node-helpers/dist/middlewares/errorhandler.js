"use strict";

module.exports = function () {
  return function (err, req, res, next) {
    if (!err) return next();
    if (!err.toJSON) return next(err);

    var error = err.toJSON();
    return res.status(error.code).send({ error: error });
  };
};